<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livestock Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }
        /* Styles for the modals */
        .modal {
            transition: opacity 0.25s ease;
        }
        body.modal-active {
            overflow-x: hidden;
            overflow-y: visible !important;
        }
        .modal-tab-button.active {
            border-color: #4f46e5;
            background-color: #eef2ff;
            color: #4f46e5;
            font-weight: 600;
        }
         .mode-toggle-button.active {
            background-color: #4f46e5;
            color: white;
        }
         @media print {
            body, html { background-color: white !important; }
            main.hub-main, .modal-overlay { display: none; }
            .modal { position: relative; overflow: visible; display: block !important; opacity: 1 !important; pointer-events: auto !important; }
            .modal-container { box-shadow: none; border: 1px solid #ccc; max-width: 100% !important; }
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-tr from-sky-100 via-indigo-200 to-purple-300 min-h-screen p-4 md:p-8">

    <main class="w-full max-w-7xl mx-auto hub-main">

        <!-- Developer Credit Board -->
        <div class="mb-8">
            <div class="bg-gradient-to-r from-slate-800 to-slate-900 text-white font-bold text-center p-4 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-300 ring-2 ring-white/50">
                <p class="tracking-wide">Developed by MD AKRAMUL HAQUE</p>
                <p class="text-sm font-normal opacity-80">BCS (LIVESTOCK), 38th BCS, DLS, BANGLADESH</p>
            </div>
        </div>

        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-extrabold text-gray-800 bg-gradient-to-r from-slate-800 to-slate-900 text-gradient">Livestock Hub</h1>
            <p class="text-slate-600 mt-4 text-lg">Your comprehensive portal for livestock management and health.</p>
        </div>

        <!-- Grid container for the links -->
        <div class="space-y-12">
            <!-- Section 1: Planning & Financials -->
            <div>
                <h2 class="text-2xl font-bold text-slate-700 mb-4 border-b-2 border-slate-300 pb-2">Planning & Financials</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <a href="https://akramulrony89-ops.github.io/dairyfinancialplanning/" target="_blank" rel="noopener noreferrer" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-cyan-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50">
                        <div class="flex flex-col items-center text-center">
                           <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-cyan-100 to-cyan-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                               <svg class="w-16 h-16 text-cyan-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V5.25A2.25 2.25 0 0018 3H6A2.25 2.25 0 003.75 5.25v12.75A2.25 2.25 0 006 20.25z" />
                               </svg>
                           </div>
                           <h2 class="text-2xl font-bold text-gray-900 mb-2">Dairy Financial Planner</h2>
                           <p class="text-gray-600 mb-6">Project profitability and analyze investments for your dairy farm.</p>
                           <span class="inline-block bg-gradient-to-br from-cyan-500 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-cyan-600 group-hover:to-cyan-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-cyan-500/40">Open Planner &rarr;</span>
                        </div>
                    </a>
                    <a href="https://akramulrony89-ops.github.io/beef-fattening-/" target="_blank" rel="noopener noreferrer" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-orange-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50">
                        <div class="flex flex-col items-center text-center">
                             <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-orange-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-3.976 5.198M21 3l-2.25 6.375" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Beef Fattening Planner</h2>
                            <p class="text-gray-600 mb-6">Plan and manage your beef fattening operations for maximum growth.</p>
                            <span class="inline-block bg-gradient-to-br from-orange-500 to-orange-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-orange-600 group-hover:to-orange-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-orange-500/40">Open Planner &rarr;</span>
                        </div>
                    </a>
                    <a href="https://akramulrony89-ops.github.io/ration/" target="_blank" rel="noopener noreferrer" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-green-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50">
                        <div class="flex flex-col items-center text-center">
                             <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Ration Calculator</h2>
                            <p class="text-gray-600 mb-6">Online tool for calculating nutritionally balanced cattle feed rations.</p>
                            <span class="inline-block bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-green-600 group-hover:to-green-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-green-500/40">Use Calculator &rarr;</span>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Section 2: Farm Management Guides -->
            <div>
                 <h2 class="text-2xl font-bold text-slate-700 mb-4 border-b-2 border-slate-300 pb-2">Farm Management Guides</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                     <button id="fodder-modal-open" class="lg:col-span-3 group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-purple-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50 text-left">
                        <div class="flex flex-col md:flex-row items-center text-center md:text-left md:space-x-8">
                            <div class="mb-6 md:mb-0 h-32 w-32 flex-shrink-0 rounded-full bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-purple-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                   <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694 4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375" />
                                </svg>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900 mb-2">Annual Feeds & Fodder Calculator</h2>
                                <p class="text-gray-600 mb-6">Dynamically calculate total feed, fodder, and land requirements for Dairy, Beef, or Fattening operations. Click to start planning.</p>
                                <span class="inline-block bg-gradient-to-br from-purple-500 to-purple-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-purple-600 group-hover:to-purple-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-purple-500/40">Open Calculator &rarr;</span>
                            </div>
                        </div>
                    </button>
                    <button id="housing-modal-open" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-amber-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50 text-left">
                        <div class="flex flex-col items-center text-center">
                            <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-amber-100 to-amber-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-amber-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5-1.5-.5M5.25 7.136L3 8.25m8.25 3l-2.25 2.25m0 0l-2.25 2.25M10.5 13.5l2.25-2.25m2.25 2.25l2.25-2.25M15 11.25l-2.25 2.25" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Dairy Housing Guide</h2>
                            <p class="text-gray-600 mb-6">Visual guide with measurements for optimal cattle housing.</p>
                            <span class="inline-block bg-gradient-to-br from-amber-500 to-amber-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-amber-600 group-hover:to-amber-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-amber-500/40">View Guide &rarr;</span>
                        </div>
                    </button>
                    <button id="selection-modal-open" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-indigo-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50 text-left">
                        <div class="flex flex-col items-center text-center">
                            <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-indigo-100 to-indigo-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                   <path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Modern Breed Selection</h2>
                            <p class="text-gray-600 mb-6">Explore data-driven criteria for dairy and beef cattle selection.</p>
                            <span class="inline-block bg-gradient-to-br from-indigo-500 to-indigo-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-indigo-600 group-hover:to-indigo-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-indigo-500/40">Learn More &rarr;</span>
                        </div>
                    </button>
                     <button id="feeding-tech-modal-open" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-slate-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50 text-left">
                        <div class="flex flex-col items-center text-center">
                            <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-slate-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.375a9.375 9.375 0 100-18.75 9.375 9.375 0 000 18.75zm0-8.625a1.125 1.125 0 110-2.25 1.125 1.125 0 010 2.25zM12 12.75a.75.75 0 00.75-.75v-1.5a.75.75 0 00-1.5 0v1.5a.75.75 0 00.75.75z" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Modern Feeding Tech</h2>
                            <p class="text-gray-600 mb-6">Learn about advanced feeding strategies to boost efficiency.</p>
                            <span class="inline-block bg-gradient-to-br from-slate-500 to-slate-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-slate-600 group-hover:to-slate-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-slate-500/40">Explore Tech &rarr;</span>
                        </div>
                    </button>
                 </div>
            </div>

            <!-- Section 3: Health & Disease -->
            <div>
                 <h2 class="text-2xl font-bold text-slate-700 mb-4 border-b-2 border-slate-300 pb-2">Health & Disease</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <button id="vaccination-modal-open" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-rose-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50 text-left">
                        <div class="flex flex-col items-center text-center">
                            <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-rose-100 to-rose-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-rose-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                   <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Vaccination Schedules</h2>
                            <p class="text-gray-600 mb-6">Standard protocols for dairy and beef cattle at different life stages.</p>
                            <span class="inline-block bg-gradient-to-br from-rose-500 to-rose-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-rose-600 group-hover:to-rose-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-rose-500/40">View Schedules &rarr;</span>
                        </div>
                    </button>
                    <a href="https://rony1103043.github.io/cattlediseaseaiincorporated2/" target="_blank" rel="noopener noreferrer" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50">
                        <div class="flex flex-col items-center text-center">
                            <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 01-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 013.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 013.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 01-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 21.75l-.648-1.188a2.25 2.25 0 01-1.423-1.423L13.5 18.75l1.188-.648a2.25 2.25 0 011.423-1.423L17.25 15l.648 1.188a2.25 2.25 0 011.423 1.423L20.5 18.75l-1.188.648a2.25 2.25 0 01-1.423 1.423z"></path>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Cattle Disease AI</h2>
                            <p class="text-gray-600 mb-6">Advanced AI tool for diagnosis of cattle diseases.</p>
                            <span class="inline-block bg-gradient-to-br from-blue-500 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-blue-600 group-hover:to-blue-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-blue-500/40">Visit Site &rarr;</span>
                        </div>
                    </a>
                    <a href="https://rony1103043.github.io/ronycattledisease-/" target="_blank" rel="noopener noreferrer" class="group block bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-teal-500/20 transition-all duration-300 transform hover:-translate-y-2 border border-white/50">
                        <div class="flex flex-col items-center text-center">
                            <div class="mb-6 h-32 w-32 rounded-full bg-gradient-to-br from-teal-100 to-teal-200 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border-4 border-white">
                                <svg class="w-16 h-16 text-teal-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Disease Directory</h2>
                            <p class="text-gray-600 mb-6">Comprehensive directory for various cattle diseases.</p>
                            <span class="inline-block bg-gradient-to-br from-teal-500 to-teal-600 text-white font-semibold py-3 px-6 rounded-lg group-hover:from-teal-600 group-hover:to-teal-700 transition-all duration-300 shadow-md group-hover:shadow-lg group-hover:shadow-teal-500/40">Explore Directory &rarr;</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        
        <footer class="text-center mt-16 space-y-2">
            <p class="text-slate-500">Â© 2025 Md Akramul Haque. All Rights Reserved.</p>
        </footer>
    </main>

    <!-- Housing Details Modal -->
    <div id="housing-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div id="housing-modal-overlay" class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        
        <div class="modal-container bg-white w-11/12 md:max-w-4xl mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-2xl font-bold text-gray-800">Dairy Cattle Housing Guidelines</p>
                    <div id="housing-modal-close" class="cursor-pointer z-50">
                        <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 18 18">
                            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                        </svg>
                    </div>
                </div>

                <!--Body-->
                <div class="my-5 max-h-[70vh] overflow-y-auto pr-4">
                    <p class="text-gray-700 mb-6">Proper housing is crucial for cattle health, comfort, and productivity. Below are standard designs and measurements suitable for conditions in Bangladesh.</p>
                    
                    <!-- Housing Systems Section -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">1. Housing Systems: Tail-to-Tail vs. Face-to-Face</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Tail-to-Tail -->
                            <div>
                                <img src="https://placehold.co/600x400/CDB4DB/333333?text=Tail-to-Tail+Layout" alt="Tail-to-Tail Housing Layout" class="rounded-lg shadow-md mb-3">
                                <h4 class="font-bold text-lg text-gray-700">Tail-to-Tail System</h4>
                                <p class="text-sm text-gray-600 mb-2">Cows face outwards, with a central passage for manure cleaning.</p>
                                <ul class="list-disc list-inside space-y-1 mb-3">
                                    <li><strong class="text-green-600">Pros:</strong> Better ventilation (good for Bangladesh's climate), reduced spread of respiratory diseases, easier milking and observation of udders.</li>
                                    <li><strong class="text-red-600">Cons:</strong> Less efficient feeding as it requires two feed alleys.</li>
                                </ul>
                                <h5 class="font-semibold text-gray-700">Key Measurements:</h5>
                                <ul class="list-disc list-inside text-gray-600 space-y-1">
                                    <li><strong>Central Passage:</strong> 2.5m - 3.0m (8-10 ft) wide.</li>
                                    <li><strong>Total Barn Width (2 rows):</strong> Approx. 11m (36 ft).</li>
                                </ul>
                            </div>
                            <!-- Face-to-Face -->
                             <div>
                                <img src="https://placehold.co/600x400/FFC8DD/333333?text=Face-to-Face+Layout" alt="Face-to-Face Housing Layout" class="rounded-lg shadow-md mb-3">
                                <h4 class="font-bold text-lg text-gray-700">Face-to-Face System</h4>
                                <p class="text-sm text-gray-600 mb-2">Cows face a central feeding manger.</p>
                                <ul class="list-disc list-inside space-y-1 mb-3">
                                    <li><strong class="text-green-600">Pros:</strong> Very efficient for feeding from a single alley, promotes social interaction.</li>
                                    <li><strong class="text-red-600">Cons:</strong> Poorer ventilation can increase disease risk, milking is less convenient.</li>
                                </ul>
                                <h5 class="font-semibold text-gray-700">Key Measurements:</h5>
                                <ul class="list-disc list-inside text-gray-600 space-y-1">
                                    <li><strong>Central Feed Alley:</strong> 4.5m - 5.0m (15-16 ft) wide.</li>
                                    <li><strong>Total Barn Width (2 rows):</strong> Approx. 12m (40 ft).</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold text-gray-800 mb-3">2. Key Area Dimensions</h3>
                    <!-- Free-Stall Section -->
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-gray-700 mb-2">Free-Stall Dimensions</h4>
                        <div class="grid md:grid-cols-2 gap-4 items-center">
                            <div>
                               <img src="https://placehold.co/600x400/A8D5BA/333333?text=Modern+Free-Stall+Barn" alt="Modern Free-Stall Barn" class="rounded-lg shadow-md">
                            </div>
                            <div>
                                <p class="mb-2 text-gray-600">Stalls provide a clean, dry, and comfortable resting area.</p>
                                <ul class="list-disc list-inside text-gray-600 space-y-1">
                                    <li><strong>Stall Width:</strong> 1.2m - 1.3m (4 ft - 4.3 ft)</li>
                                    <li><strong>Stall Length:</strong> 2.4m - 2.7m (8 ft - 9 ft)</li>
                                    <li><strong>Brisket Board:</strong> Placed 1.7m from the rear curb.</li>
                                    <li><strong>Neck Rail:</strong> Positioned ~1.2m high.</li>
                                    <li><strong>Bedding:</strong> Deep sand, straw, or rubber mats are recommended.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Farm Layout Calculator -->
                    <div class="border-t pt-6 mt-8">
                         <h3 class="text-xl font-semibold text-gray-800 mb-3">3. Dynamic Farm Layout Planner</h3>
                         <div class="p-4 bg-indigo-50 border border-indigo-200 rounded-lg">
                            <label for="cow-herd-size" class="block text-lg font-semibold text-indigo-800">Enter Your Target Herd Size:</label>
                            <input type="number" id="cow-herd-size" value="40" class="mt-2 w-full md:w-1/3 p-2 border border-indigo-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" oninput="updateFarmLayout()">
                            <p class="text-sm text-indigo-600 mt-1">Adjust the number of cows to see scaled recommendations below.</p>
                         </div>

                         <div class="mt-6 space-y-6">
                            <div>
                                <h4 class="font-bold text-lg text-gray-700">A. Projected Herd Composition</h4>
                                <ul class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-2">
                                    <li class="bg-gray-100 p-3 rounded-md text-center"><strong>Cows in Milk:</strong> <span id="layout_milking_cows" class="block font-bold text-xl">0</span></li>
                                    <li class="bg-gray-100 p-3 rounded-md text-center"><strong>Dry Cows:</strong> <span id="layout_dry_cows" class="block font-bold text-xl">0</span></li>
                                    <li class="bg-gray-100 p-3 rounded-md text-center"><strong>Bullocks:</strong> <span id="layout_bullocks" class="block font-bold text-xl">0</span></li>
                                    <li class="bg-gray-100 p-3 rounded-md text-center"><strong>Heifers:</strong> <span id="layout_heifers" class="block font-bold text-xl">0</span></li>
                                    <li class="bg-gray-100 p-3 rounded-md text-center"><strong>Calves:</strong> <span id="layout_calves" class="block font-bold text-xl">0</span></li>
                                </ul>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8">
                                <div>
                                    <h4 class="font-bold text-lg text-gray-700">B. Animal Housing</h4>
                                    <ul class="list-decimal list-inside text-gray-600 mt-2 space-y-2 text-sm">
                                        <li>Stanchion Barn (Milking): <strong class="text-gray-900"><span id="layout_stanchion_barn">0</span> sq.ft.</strong></li>
                                        <li>Baby Calf Barn: <strong class="text-gray-900"><span id="layout_baby_calf_barn">0</span> rooms</strong>, approx. <strong class="text-gray-900"><span id="layout_baby_calf_area">0</span> sq.ft. total</strong></li>
                                        <li>Isolation Shed (2 animals): <strong class="text-gray-900">128 sq.ft.</strong> (fixed)</li>
                                        <li>Loafing Barn (Dry/Heifers): Unpaved <strong class="text-gray-900"><span id="layout_loafing_unroofed">0</span> sq.ft.</strong> + Paved <strong class="text-gray-900"><span id="layout_loafing_paved">0</span> sq.ft.</strong></li>
                                        <li>Older Calf/Heifer Barn: <strong class="text-gray-900"><span id="layout_older_calf_barn">0</span> sq.ft.</strong></li>
                                        <li>Cow Preparation Room: <strong class="text-gray-900"><span id="layout_cow_prep_room">0</span> sq.ft.</strong></li>
                                        <li>Bullock Shed: <strong class="text-gray-900"><span id="layout_bullock_shed">0</span> sq.ft.</strong></li>
                                        <li>Maternity Barn (<span id="layout_maternity_capacity">0</span> cows): <strong class="text-gray-900"><span id="layout_maternity_barn">0</span> sq.ft.</strong></li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-700">C. Support & Storage Buildings</h4>
                                    <ul class="list-disc list-inside text-gray-600 mt-2 space-y-1 text-sm">
                                        <li>Main Feed Store: <strong class="text-gray-900"><span id="layout_feed_store">0</span> sq.ft.</strong></li>
                                        <li>Straw & Hay Store: <strong class="text-gray-900"><span id="layout_hay_store">0</span> sq.ft.</strong></li>
                                        <li>Tractor Room: <strong class="text-gray-900">200 sq.ft.</strong> (fixed)</li>
                                        <li>Milk Van Room: <strong class="text-gray-900">200 sq.ft.</strong> (fixed)</li>
                                        <li>Manager & Staff Rooms: <strong class="text-gray-900">~540 sq.ft. total</strong> (fixed)</li>
                                        <li>Chopping Machine Room: <strong class="text-gray-900">80 sq.ft.</strong> (fixed)</li>
                                        <li>Misc. Storage & Utility Rooms: <strong class="text-gray-900">~500 sq.ft.</strong> (fixed)</li>
                                    </ul>
                                </div>
                            </div>
                             <div>
                                <h4 class="font-bold text-lg text-gray-700">D. Land, Pits & Open Areas</h4>
                                 <ul class="list-disc list-inside text-gray-600 mt-2 space-y-1 text-sm">
                                     <li>Fodder Plot: <strong class="text-gray-900 text-lg"><span id="layout_fodder_plot">0</span> acres</strong></li>
                                     <li>Manure Pit Area: <strong class="text-gray-900"><span id="layout_manure_pit">0</span> sq.ft.</strong></li>
                                     <li>Silo Pit Area: <strong class="text-gray-900"><span id="layout_silo_pit">0</span> sq.ft.</strong></li>
                                     <li>Threshing Floor: <strong class="text-gray-900"><span id="layout_threshing_floor">0</span> sq.ft.</strong></li>
                                     <li>Pond Area: <strong class="text-gray-900"><span id="layout_pond">0</span> sq.ft.</strong></li>
                                     <li>Breeding Chute / Travis: <strong class="text-gray-900">Required</strong></li>
                                     <li>Open Field for Exercise: <strong class="text-gray-900">Required</strong></li>
                                 </ul>
                            </div>
                         </div>
                    </div>

                </div>

                <!--Footer-->
                <div class="flex justify-end pt-2 border-t mt-4">
                    <button id="housing-modal-close-btn" class="px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Selection Criteria Modal -->
    <div id="selection-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div id="selection-modal-overlay" class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-5xl mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-2xl font-bold text-gray-800">Modern Breed Selection Criteria</p>
                    <div id="selection-modal-close" class="cursor-pointer z-50">
                        <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 18 18">
                            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                        </svg>
                    </div>
                </div>

                <!--Body-->
                <div class="my-5 max-h-[70vh] overflow-y-auto pr-4">
                    <p class="text-gray-700 mb-6">Modern animal breeding has shifted from visual appraisal to a data-intensive science. Breeders now leverage genomic data and sophisticated indexes to accelerate genetic progress and maximize farm profitability.</p>
                    
                    <!-- Tabs -->
                    <div class="border-b border-gray-200 mb-4">
                        <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300 active" data-tab="dairy-tab">Dairy Cattle</button>
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="beef-tab">Beef Cattle</button>
                        </nav>
                    </div>

                    <!-- Dairy Content -->
                    <div id="dairy-tab" class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">Part 1: Data-Driven Genomic Selection</h3>
                            <div class="p-4 bg-indigo-50 rounded-lg">
                                <h4 class="font-bold text-lg text-indigo-800">Core Principle: Genomic Indexes</h4>
                                <p class="text-sm text-indigo-700">Breeders use DNA samples to predict an animal's future performance via Genomic Estimated Breeding Values (gEBVs). These are combined into economic indexes like <strong>Net Merit (NM$)</strong> or <strong>Total Performance Index (TPI)</strong> to rank animals on overall profitability.</p>
                            </div>
                            <div class="grid md:grid-cols-3 gap-6 mt-4">
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-2">Production & Quality</h4>
                                    <ul class="list-disc list-inside space-y-1 text-gray-600 text-sm">
                                        <li><strong>Fat & Protein Yield (kg):</strong> Primary driver of milk payment.</li>
                                        <li><strong>Productive Life (PL):</strong> Longevity in the herd.</li>
                                        <li><strong>Beta-Casein (A2/A2):</strong> Niche premium milk market.</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-2">Health & Fertility</h4>
                                    <ul class="list-disc list-inside space-y-1 text-gray-600 text-sm">
                                        <li><strong>Somatic Cell Score (SCS):</strong> Mastitis resistance.</li>
                                        <li><strong>Daughter Pregnancy Rate (DPR):</strong> Fertility measure.</li>
                                        <li><strong>Livability (LIV):</strong> Ability to stay alive in the herd.</li>
                                    </ul>
                                </div>
                                 <div>
                                    <h4 class="font-semibold text-gray-800 mb-2">Efficiency</h4>
                                    <ul class="list-disc list-inside space-y-1 text-gray-600 text-sm">
                                        <li><strong>Feed Saved:</strong> A direct measure of feed efficiency.</li>
                                        <li><strong>Body Size:</strong> Trend towards moderate, efficient cows.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="border-t pt-4">
                             <h3 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">Part 2: Physical Conformation Traits</h3>
                             <p class="text-sm text-gray-600 mb-4">While data is key, physical structure ensures a cow can last. Breeders look for a harmonious blend of the following traits.</p>
                             <div class="grid md:grid-cols-2 gap-x-8 gap-y-4">
                                 <div>
                                     <h4 class="font-bold text-gray-700">Dairy Character & Capacity</h4>
                                     <dl class="mt-2 text-sm text-gray-600 space-y-2">
                                         <dt class="font-semibold text-gray-800">Angularity:</dt>
                                         <dd class="pl-4">Sharpness of bone, indicating a tendency to convert feed to milk, not fat. Ribs are wide apart and flat.</dd>
                                         <dt class="font-semibold text-gray-800">Chest & Barrel:</dt>
                                         <dd class="pl-4">Wide chest for heart/lung room; deep, long barrel for feed capacity.</dd>
                                     </dl>
                                 </div>
                                 <div>
                                     <h4 class="font-bold text-gray-700">Structural Correctness</h4>
                                     <dl class="mt-2 text-sm text-gray-600 space-y-2">
                                         <dt class="font-semibold text-gray-800">Topline & Rump:</dt>
                                         <dd class="pl-4">Strong, level topline. Wide rump with a slight slope from hooks to pins for calving ease.</dd>
                                          <dt class="font-semibold text-gray-800">Legs & Feet:</dt>
                                         <dd class="pl-4">Correct rear leg set (slight angle at the hock). Steep hoof angle for good mobility.</dd>
                                     </dl>
                                 </div>
                                 <div class="md:col-span-2">
                                      <h4 class="font-bold text-gray-700">Udder System</h4>
                                     <dl class="mt-2 text-sm text-gray-600 space-y-2">
                                         <dt class="font-semibold text-gray-800">Attachments:</dt>
                                         <dd class="pl-4">Strong, high, and wide rear udder attachment; smooth fore udder attachment. This prevents sagging.</dd>
                                          <dt class="font-semibold text-gray-800">Udder Depth & Suspension:</dt>
                                         <dd class="pl-4">Should be held well above the hocks. A strong suspensory ligament creates a clear cleft.</dd>
                                         <dt class="font-semibold text-gray-800">Teat Placement:</dt>
                                         <dd class="pl-4">Cylindrical teats of medium length, placed squarely under each quarter, pointing straight down.</dd>
                                     </dl>
                                 </div>
                             </div>
                        </div>
                    </div>

                    <!-- Beef Content (hidden by default) -->
                    <div id="beef-tab" class="space-y-6 hidden">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">Part 1: Data-Driven Genomic Selection</h3>
                             <div class="p-4 bg-rose-50 rounded-lg">
                                <h4 class="font-bold text-lg text-rose-800">Core Principle: Genomic-Enhanced EPDs</h4>
                                <p class="text-sm text-rose-700">Genomics drastically increases the accuracy of <strong>Expected Progeny Differences (EPDs)</strong>. These are combined into bio-economic indexes like <strong>Weaned Calf Value ($W)</strong> and <strong>Beef Value ($B)</strong> to select for profitability across different supply chain segments.</p>
                            </div>
                            <div class="grid md:grid-cols-3 gap-6 mt-4">
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-2">Growth & Performance</h4>
                                    <ul class="list-disc list-inside space-y-1 text-gray-600 text-sm">
                                        <li><strong>Calving Ease Direct (CED):</strong> Reduces difficult births.</li>
                                        <li><strong>Weaning (WW) & Yearling (YW) Weight:</strong> Growth potential.</li>
                                        <li><strong>Docility (DOC):</strong> calmer cattle are safer and perform better.</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-2">Carcass Quality</h4>
                                    <ul class="list-disc list-inside space-y-1 text-gray-600 text-sm">
                                         <li><strong>Marbling (Marb):</strong> Primary driver of meat quality grade.</li>
                                        <li><strong>Ribeye Area (REA):</strong> Indicator of muscle and yield.</li>
                                        <li><strong>Fat Thickness:</strong> Balancing for optimal finish.</li>
                                    </ul>
                                </div>
                                 <div>
                                    <h4 class="font-semibold text-gray-800 mb-2">Maternal & Efficiency</h4>
                                    <ul class="list-disc list-inside space-y-1 text-gray-600 text-sm">
                                        <li><strong>Heifer Pregnancy (HP):</strong> Daughter fertility.</li>
                                        <li><strong>Stayability (STAY):</strong> Herd longevity for cows.</li>
                                        <li><strong>Feed Efficiency (RFI / FE):</strong> Critical for profitability.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                         <div class="border-t pt-4">
                             <h3 class="text-xl font-semibold text-gray-800 mb-3 border-b pb-2">Part 2: Physical Conformation Traits</h3>
                             <p class="text-sm text-gray-600 mb-4">A sound structure is required to carry the muscle and perform in various environments. Breeders visually assess for balance and functionality.</p>
                             <div class="grid md:grid-cols-2 gap-x-8 gap-y-4">
                                 <div>
                                     <h4 class="font-bold text-gray-700">Muscling & Capacity</h4>
                                     <dl class="mt-2 text-sm text-gray-600 space-y-2">
                                         <dt class="font-semibold text-gray-800">Thickness & Shape:</dt>
                                         <dd class="pl-4">Natural thickness down the topline, carrying through to a deep, full hindquarter. Viewed from behind, they should be wide and powerful.</dd>
                                         <dt class="font-semibold text-gray-800">Body Depth:</dt>
                                         <dd class="pl-4">Deep-ribbed and deep-flanked, indicating high volume and capacity for feed intake.</dd>
                                     </dl>
                                 </div>
                                 <div>
                                     <h4 class="font-bold text-gray-700">Structural Correctness</h4>
                                     <dl class="mt-2 text-sm text-gray-600 space-y-2">
                                         <dt class="font-semibold text-gray-800">Feet & Legs:</dt>
                                         <dd class="pl-4">Good angulation in the hock and shoulder. Strong pasterns and a large, sound hoof are essential for mobility and longevity.</dd>
                                          <dt class="font-semibold text-gray-800">Balance & Skeletal Width:</dt>
                                         <dd class="pl-4">A balanced look from the side profile. Wide-chested and stands on a wide base, indicating a robust skeleton.</dd>
                                     </dl>
                                 </div>
                                  <div class="md:col-span-2">
                                      <h4 class="font-bold text-gray-700">Breed & Sex Character</h4>
                                     <dl class="mt-2 text-sm text-gray-600 space-y-2">
                                         <dt class="font-semibold text-gray-800">Masculinity (Bulls):</dt>
                                         <dd class="pl-4">A powerful head, strong jaw, and muscular crest. Well-developed testicles of uniform size.</dd>
                                          <dt class="font-semibold text-gray-800">Femininity (Heifers/Cows):</dt>
                                         <dd class="pl-4">A refined, clean-fronted appearance with a long, lean neck. Should show maternal characteristics.</dd>
                                     </dl>
                                 </div>
                             </div>
                        </div>
                    </div>
                </div>

                <!--Footer-->
                <div class="flex justify-end pt-2 border-t mt-4">
                    <button id="selection-modal-close-btn" class="px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vaccination Schedules Modal -->
    <div id="vaccination-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div id="vaccination-modal-overlay" class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-5xl mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-2xl font-bold text-gray-800">Cattle Vaccination Schedules</p>
                    <div id="vaccination-modal-close" class="cursor-pointer z-50">
                        <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 18 18">
                            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                        </svg>
                    </div>
                </div>

                <!--Body-->
                <div class="my-5 max-h-[70vh] overflow-y-auto pr-4">
                   <div class="p-4 mb-6 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700">
                        <p class="font-bold">Important Disclaimer</p>
                        <p class="text-sm">This is a generalized vaccination schedule. It is <strong>CRITICAL</strong> to consult with a local veterinarian to develop a protocol specific to your farm's location, disease prevalence, and herd history. Always follow the vaccine manufacturer's instructions.</p>
                    </div>
                    
                    <!-- Tabs -->
                    <div class="border-b border-gray-200 mb-4">
                        <nav class="-mb-px flex space-x-4 overflow-x-auto" aria-label="Tabs">
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300 active" data-tab="calves-tab">Calves (0-6 Months)</button>
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="heifers-tab">Heifers & Young Bulls</button>
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="adults-tab">Adult Herd</button>
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="dls-vaccine-tab">DLS Available Vaccine</button>
                        </nav>
                    </div>

                    <!-- Calves Content -->
                    <div id="calves-tab" class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Age</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vaccine</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Diseases Prevented</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dose & Route</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Schedule / Remarks</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">1-2 Months</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">FMD</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Foot and Mouth Disease</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Per manufacturer (e.g., 2-3 mL, SC/IM)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">First dose. Booster required after 1 month, then every 6 months.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">3-4 Months</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">Clostridial 7/8-Way</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Blackleg, Malignant Edema, etc.</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2-5 mL, Subcutaneous (SC)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">First dose, then booster in 4-6 weeks. Annual booster thereafter.</td>
                                </tr>
                                 <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">4-6 Months</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">IBR-BVD-PI3-BRSV</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Bovine Respiratory Disease Complex</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2 mL, Intramuscular (IM) or SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Modified-Live Virus (MLV) vaccine. Booster before first breeding.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">4-6 Months</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">HS & Anthrax</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Hemorrhagic Septicemia, Anthrax</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Per manufacturer (SC)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Crucial in endemic areas (like Bangladesh). Annually before monsoon.</td>
                                </tr>
                                <tr class="bg-red-50">
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">4-12 Months (Heifers)</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">Brucellosis (RB51)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">"Bangs" Disease</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2 mL, SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap text-red-700">One-time dose for replacement heifers only. Must be administered by a certified veterinarian.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Heifers Content -->
                     <div id="heifers-tab" class="overflow-x-auto hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                             <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Timing</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vaccine</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dose & Route</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Schedule / Remarks</th>
                                </tr>
                            </thead>
                             <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Pre-Breeding (30-60 days prior)</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">IBR-BVD-PI3-BRSV (MLV) Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2 mL, IM or SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Boosts immunity for conception and early pregnancy.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Pre-Breeding</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">Leptospirosis (5-Way)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2 mL, SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Initial: 2 doses, 4-6 weeks apart. Then annual booster before breeding.</td>
                                </tr>
                                 <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Annually</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">Clostridial 7/8-Way Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2-5 mL, SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Maintains protection against clostridial diseases.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Every 6 Months</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">FMD Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Per manufacturer</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Maintains high immunity levels in endemic regions.</td>
                                </tr>
                            </tbody>
                        </table>
                     </div>

                     <!-- Adults Content -->
                     <div id="adults-tab" class="overflow-x-auto hidden">
                          <table class="min-w-full divide-y divide-gray-200">
                             <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Timing</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vaccine</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dose & Route</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Schedule / Remarks</th>
                                </tr>
                            </thead>
                             <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                <tr class="bg-blue-50">
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Pre-Calving (4-6 weeks prior)</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">IBR-BVD-PI3-BRSV</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2-5 mL, IM or SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap"><strong>Use KILLED vaccine only on pregnant animals.</strong> Boosts maternal antibodies in colostrum.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Annually (Pre-Breeding)</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">Leptospirosis (5-Way) Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2 mL, SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Protects against reproductive losses.</td>
                                </tr>
                                 <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Annually</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">Clostridial 7/8-Way Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">2-5 mL, SC</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Consistent herd-wide protection.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Every 6 Months</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">FMD Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Per manufacturer</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Essential for biosecurity in high-risk areas.</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-medium">Annually (Pre-Monsoon)</td>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">HS & Anthrax Booster</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Per manufacturer (SC)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">Maintains immunity against seasonal outbreaks.</td>
                                </tr>
                            </tbody>
                        </table>
                     </div>

                    <!-- DLS Vaccine Content -->
                    <div id="dls-vaccine-tab" class="overflow-x-auto hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">à¦à¦¿à¦à¦¾à¦° à¦¨à¦¾à¦®</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">à¦¸à¦à¦°à¦à§à¦·à¦£à§à¦° à¦¤à¦¾à¦ªà¦®à¦¾à¦¤à§à¦°à¦¾ à¦ à¦®à§à¦¯à¦¼à¦¾à¦¦</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">à¦ªà§à¦°à¦¤à¦¿ à¦­à¦¾à¦¯à¦¼à¦¾à¦²à§ à¦à¦¿à¦à¦¾à¦° à¦®à¦¾à¦¤à§à¦°à¦¾</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦¬à¦¿à¦§à¦¿</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">à¦®à¦¨à§à¦¤à¦¬à§à¦¯</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§§à¥¤ à¦à§à¦·à§à¦°à¦¾à¦°à§à¦ (FMD)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¨-à§®â - à§¬ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§§à§¬</td>
                                    <td class="px-4 py-4">à¦à¦°à§/à¦®à¦¹à¦¿à¦·-à§¬ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§<br>à¦¬à¦¾à¦à§à¦°-à§© à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§<br>à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾-à§¨ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§ª à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§, à§ª-à§¬ à¦®à¦¾à¦¸ à¦à¦¨à§à¦¤à¦°</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§¨à¥¤ à¦¤à¦¡à¦¼à¦à¦¾ (Anthrax)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¨-à§®â - à§¬ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§§à§¦à§¦</td>
                                    <td class="px-4 py-4">à¦à¦°à§/à¦®à¦¹à¦¿à¦·/à¦à§à¦¡à¦¼à¦¾-à§§ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§<br>à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾-à§¦.à§« à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¬ à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§, à§§ à¦¬à¦à¦° à¦à¦¨à§à¦¤à¦°</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§©à¥¤ à¦¬à¦¾à¦¦à¦²à¦¾ (Blackleg)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¨-à§®â - à§¬ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¨à§¦</td>
                                    <td class="px-4 py-4">à¦à¦°à§/à¦®à¦¹à¦¿à¦·-à§« à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§<br>à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾-à§¨ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¬ à¦®à¦¾à¦¸-à§© à¦¬à¦à¦° à¦¬à¦¯à¦¼à¦¸à§ à¦ªà§à¦°à¦¾à¦£à¦¿à¦¤à§, à§¬ à¦®à¦¾à¦¸ à¦à¦¨à§à¦¤à¦°</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§ªà¥¤ à¦à¦²à¦¾à¦«à§à¦²à¦¾ (HS)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¨-à§®â - à§¬ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§«à§¦</td>
                                    <td class="px-4 py-4">à¦à¦°à§/à¦®à¦¹à¦¿à¦·-à§¨ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§<br>à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾-à§§ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§</td>
                                    <td class="px-4 py-4">à§¨ à¦¬à¦à¦° à¦¬à¦¯à¦¼à¦¸à§, à§¬ à¦®à¦¾à¦¸ à¦à¦¨à§à¦¤à¦°à¥¤<br>à¦à¦¨à¦à§à¦à¦¿à¦ à¦à¦²à¦¾à¦à¦¾à¦¯à¦¼ à§¬ à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§ à¦¬à¦¾à¦à§à¦°à§ à¦à¦°à§à¦§à§à¦ à¦®à¦¾à¦¤à§à¦°à¦¾à¦¯à¦¼</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§«à¥¤ à¦ªà¦¿à¦ªà¦¿à¦à¦° (PPR)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">-à§¨à§¦â - à§¨ à¦¬à¦à¦°</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§§à§¦à§¦</td>
                                    <td class="px-4 py-4">à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾-à§§ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§</td>
                                    <td class="px-4 py-4">à§ª à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§, à§§ à¦¬à¦à¦° à¦à¦¨à§à¦¤à¦°à¥¤<br>à¦®à¦¾à¦¯à¦¼à§à¦° à¦à¦¿à¦à¦¾ à¦¨à¦¾ à¦¦à§à¦¯à¦¼à¦¾ à¦¥à¦¾à¦à¦²à§ à¦¬à¦¾à¦à§à¦à¦¾à¦¯à¦¼ à§¨ à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§ à§§à¦® à¦¡à§à¦, à§¬ à¦®à¦¾à¦¸à§ à¦¬à§à¦¸à§à¦à¦¾à¦° à¦¡à§à¦</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§¬à¥¤ à¦à¦¾à¦à¦²à§à¦° à¦¬à¦¸à¦¨à§à¦¤ (Goat Pox)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">-à§¨à§¦â - à§§ à¦¬à¦à¦°<br>à§¨-à§®â- à§§ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§§à§¦à§¦</td>
                                    <td class="px-4 py-4">à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾-à§§ à¦¸à¦¿.à¦¸à¦¿. à¦à¦¾à¦®à¦¡à¦¼à¦¾à¦° à¦¨à¦¿à¦à§</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§¨ à¦®à¦¾à¦¸ à¦¬à¦¾ à¦¤à¦¦à§à¦°à§à¦§à§à¦¬ à¦¬à¦¯à¦¼à¦¸à§ à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾à¦¯à¦¼ à§§ à¦¬à¦¾à¦°</td>
                                </tr>
                                 <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§­à¥¤ à¦à¦²à¦¾à¦¤à¦à¦ (LEP)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">-à§¨à§¦â- à§§ à¦¬à¦à¦°<br>à§¨-à§®â - à§¬ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§§ à¦®à¦¾à¦¤à§à¦°à¦¾</td>
                                    <td class="px-4 py-4">à¦à§à¦à§à¦°- à§© à¦¸à¦¿.à¦¸à¦¿. à¦®à¦¾à¦à¦¸à§</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§© à¦®à¦¾à¦¸ à¦¬à¦¾ à¦¤à¦¦à§à¦°à§à¦§à§à¦¬ à¦¬à¦¯à¦¼à¦¸à§, à§§ à¦¬à¦à¦° à¦à¦¨à§à¦¤à¦°</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-4 whitespace-nowrap font-semibold text-gray-800">à§®à¥¤ à¦à¦²à¦¾à¦¤à¦à¦ (HEP)</td>
                                    <td class="px-4 py-4 whitespace-nowrap">-à§¨à§¦â- à§§ à¦¬à¦à¦°<br>à§¨-à§®â - à§¬ à¦®à¦¾à¦¸</td>
                                    <td class="px-4 py-4 whitespace-nowrap">à§§ à¦®à¦¾à¦¤à§à¦°à¦¾</td>
                                    <td class="px-4 py-4">à¦à§à¦à§à¦°à§à¦° à¦¬à¦¾à¦à§à¦à¦¾/à¦¬à¦¾à¦à§à¦°/à¦¬à¦¿à¦¡à¦¼à¦¾à¦²/à¦à¦¾à¦à¦²/à¦­à§à¦¡à¦¼à¦¾/à¦¬à¦¾à¦¨à¦°-à§§.à§« à¦¸à¦¿.à¦¸à¦¿.,<br>à¦à¦°à§-à§© à¦¸à¦¿.à¦¸à¦¿. à¦®à¦¾à¦à¦¸à§</td>
                                    <td class="px-4 py-4">à¦®à¦¾à¦¯à¦¼à§à¦° à¦à¦¿à¦à¦¾ à¦¨à¦¾ à¦¦à§à¦¯à¦¼à¦¾ à¦¥à¦¾à¦à¦²à§ à§¨ à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§ à¦à§à¦à§à¦°à§à¦° à¦¬à¦¾à¦à§à¦à¦¾à¦¯à¦¼, à¦ªà¦°à§ à§ª à¦®à¦¾à¦¸ à¦¬à¦¯à¦¼à¦¸à§ LEP</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!--Footer-->
                <div class="flex justify-end pt-2 border-t mt-4">
                    <button id="vaccination-modal-close-btn" class="px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Feeds and Fodder Modal -->
    <div id="fodder-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div id="fodder-modal-overlay" class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-5xl mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-2xl font-bold text-gray-800">Annual Feeds & Fodder Calculator</p>
                    <div id="fodder-modal-close" class="cursor-pointer z-50">
                        <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 18 18">
                            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                        </svg>
                    </div>
                </div>

                <!--Body-->
                <div class="my-5 max-h-[70vh] overflow-y-auto pr-4">

                     <!-- Tabs -->
                    <div class="border-b border-gray-200 mb-4">
                        <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300 active" data-tab="dairy-fodder-tab">Dairy Herd</button>
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="beef-fodder-tab">Beef Herd</button>
                            <button class="modal-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="fattening-fodder-tab">Fattening</button>
                        </nav>
                    </div>

                    <!-- Dairy Fodder Content -->
                    <div id="dairy-fodder-tab">
                        <div class="p-4 bg-purple-50 border border-purple-200 rounded-lg mb-6">
                            <div class="flex justify-center mb-4">
                                <div class="inline-flex rounded-md shadow-sm bg-gray-200 p-1">
                                    <button data-mode="recommendation" class="mode-toggle-button dairy-mode-toggle active px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-md z-10">Recommendation</button>
                                    <button data-mode="manual" class="mode-toggle-button dairy-mode-toggle px-4 py-2 text-sm font-medium text-gray-700 rounded-md -ml-1">Manual Input</button>
                                </div>
                            </div>
                            
                            <div id="dairy-recommendation-inputs">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="fodder-herd-size" class="block text-lg font-semibold text-purple-800">Enter Total Number of Dairy Cows:</label>
                                        <input type="number" id="fodder-herd-size" value="517" class="mt-2 w-full p-2 border border-purple-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500" oninput="updateFodderCalculator()">
                                    </div>
                                    <div>
                                        <label for="dairy_milk_production_rec" class="block text-lg font-semibold text-purple-800">Avg. Daily Milk Production (kg):</label>
                                        <input type="number" id="dairy_milk_production_rec" value="10" step="0.5" class="mt-2 w-full p-2 border border-purple-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500" oninput="updateFodderCalculator()">
                                    </div>
                                </div>
                                <p class="text-sm text-purple-600 mt-2">Calculations for feed, fodder, and land will update automatically.</p>
                            </div>
                            
                            <div id="dairy-manual-inputs" class="hidden space-y-4">
                                <div>
                                    <h4 class="font-semibold text-purple-800 mb-2">1. Herd Composition</h4>
                                    <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                                        <div><label class="text-xs">Lactating Cows</label><input type="number" id="manual_dairy_lactating" value="362" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Dry Cows</label><input type="number" id="manual_dairy_dry" value="155" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Bullocks</label><input type="number" id="manual_dairy_bullocks" value="83" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Heifers</label><input type="number" id="manual_dairy_heifers" value="181" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Calves</label><input type="number" id="manual_dairy_calves" value="362" class="w-full p-1 border rounded"></div>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-purple-800 mb-2">2. Average Body Weight (kg/head)</h4>
                                    <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                                        <div><label class="text-xs">Lactating Cows</label><input type="number" id="manual_dairy_bw_l" value="400" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Dry Cows</label><input type="number" id="manual_dairy_bw_d" value="300" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Bullocks</label><input type="number" id="manual_dairy_bw_b" value="500" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Heifers</label><input type="number" id="manual_dairy_bw_h" value="120" class="w-full p-1 border rounded"></div>
                                        <div><label class="text-xs">Calves</label><input type="number" id="manual_dairy_bw_c" value="30" class="w-full p-1 border rounded"></div>
                                    </div>
                                </div>
                                <div>
                                     <h4 class="font-semibold text-purple-800 mb-2">3. Production & Feed Intake</h4>
                                     <p class="text-xs text-gray-500 mb-2">Grass and most concentrate values are calculated from body weight. Lactating concentrate is calculated from milk yield.</p>
                                     <div class="grid grid-cols-2 gap-x-4 gap-y-2 text-xs">
                                        <div class="col-span-2">
                                             <label class="font-medium">Lactating Cow Milk Yield (kg/day)</label>
                                             <input type="number" step="0.5" id="manual_dairy_milk_production" value="10" class="w-full p-1 border rounded">
                                        </div>

                                        <p class="font-medium col-span-2 mt-2">Daily Feed Intake (kg/head)</p>
                                        <p class="font-medium col-span-2">Lactating:</p>
                                        <div><label>Grass (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_lg" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        <div><label>Concentrate (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_lc" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        
                                        <p class="font-medium col-span-2 mt-2">Dry:</p>
                                        <div><label>Grass (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_dg" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        <div><label>Concentrate (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_dc" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        
                                        <p class="font-medium col-span-2 mt-2">Bullocks:</p>
                                        <div><label>Grass (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_bg" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        <div><label>Concentrate (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_bc" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        
                                        <p class="font-medium col-span-2 mt-2">Heifers:</p>
                                        <div><label>Grass (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_hg" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        <div><label>Concentrate (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_hc" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        
                                        <p class="font-medium col-span-2 mt-2">Calves:</p>
                                        <div><label>Grass (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_cg" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                        <div><label>Concentrate (Calculated)</label><input type="number" step="0.1" id="manual_dairy_feed_cc" class="w-full p-1 border rounded bg-gray-100" readonly></div>
                                     </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">Projected Herd Composition</h3>
                                <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Lactating Cows:</strong> <span id="fodder_lactating_cows" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Dry Cows:</strong> <span id="fodder_dry_cows" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Bullocks:</strong> <span id="fodder_bullocks" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Heifers:</strong> <span id="fodder_heifers" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Calves:</strong> <span id="fodder_calves" class="block font-bold text-xl">0</span></div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">Annual Feed Requirements</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Animal Type</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Green Grass (kg)</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Concentrate (kg)</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200 text-sm" id="fodder_req_table">
                                            <!-- Rows will be injected by JavaScript -->
                                        </tbody>
                                        <tfoot class="bg-gray-100 font-bold">
                                            <tr>
                                                <td class="px-4 py-3">Total</td>
                                                <td class="px-4 py-3" id="fodder_total_grass">0</td>
                                                <td class="px-4 py-3" id="fodder_total_concentrate">0</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">Annual Land Requirements</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <p class="text-sm text-green-800">Fodder Production</p>
                                        <p class="font-bold text-2xl text-green-900"><span id="fodder_land_production">0</span> Acres</p>
                                    </div>
                                     <div class="bg-blue-50 p-4 rounded-lg">
                                        <p class="text-sm text-blue-800">Farmstead (Buildings)</p>
                                        <p class="font-bold text-2xl text-blue-900"><span id="fodder_land_farmstead">0</span> Acres</p>
                                    </div>
                                    <div class="bg-purple-50 p-4 rounded-lg ring-2 ring-purple-200">
                                        <p class="text-sm text-purple-800">Total Land Required</p>
                                        <p class="font-bold text-2xl text-purple-900"><span id="fodder_land_total">0</span> Acres</p>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">Year-Round Fodder Production Plan</h3>
                                <div class="space-y-4 text-sm text-gray-700">
                                    <p>A sustainable plan involves a mix of perennial and seasonal grasses.</p>
                                    <ul class="list-disc list-inside space-y-2 pl-4">
                                        <li>Land for Perennial Grasses (60%): <strong class="text-gray-900"><span id="fodder_perennial_land">0</span> Acres</strong></li>
                                        <li>Land for Seasonal Grasses (40%): <strong class="text-gray-900"><span id="fodder_seasonal_land">0</span> Acres</strong></li>
                                    </ul>
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <p>Projected Total Green Grass Production: <strong class="text-gray-900"><span id="fodder_total_production">0</span> kg/year</strong></p>
                                        <p>Total Requirement: <strong class="text-gray-900"><span id="fodder_total_requirement_2">0</span> kg/year</strong></p>
                                        <p class="mt-2 font-semibold text-lg">Surplus Production: <strong class="text-green-600"><span id="fodder_surplus">0</span> kg/year</strong></p>
                                        <p class="text-xs mt-1">This excess can be preserved as silage or hay for use during feed scarcity.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                     <!-- Beef Fodder Content (hidden by default) -->
                    <div id="beef-fodder-tab" class="hidden">
                        <div class="p-4 bg-rose-50 border border-rose-200 rounded-lg mb-6">
                            <label for="fodder-beef-herd-size" class="block text-lg font-semibold text-rose-800">Enter Number of Breeding Cows:</label>
                            <input type="number" id="fodder-beef-herd-size" value="100" class="mt-2 w-full md:w-1/3 p-2 border border-rose-300 rounded-md focus:ring-2 focus:ring-rose-500 focus:border-rose-500" oninput="updateFodderCalculatorBeef()">
                            <p class="text-sm text-rose-600 mt-1">Calculations for a typical beef cow-calf operation will update automatically.</p>
                        </div>
                         <div class="space-y-6">
                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">1. Projected Herd Composition</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Breeding Cows:</strong> <span id="fodder_beef_cows" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Bulls:</strong> <span id="fodder_beef_bulls" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Growing Calves/Steers:</strong> <span id="fodder_beef_steers" class="block font-bold text-xl">0</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Replacement Heifers:</strong> <span id="fodder_beef_heifers" class="block font-bold text-xl">0</span></div>
                                </div>
                            </div>
                             <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">2. Annual Feed Requirements (Estimated)</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Animal Type</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Roughage (kg)</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Concentrate (kg)</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200 text-sm" id="fodder_req_table_beef">
                                            <!-- Rows will be injected by JavaScript -->
                                        </tbody>
                                        <tfoot class="bg-gray-100 font-bold">
                                            <tr>
                                                <td class="px-4 py-3">Total</td>
                                                <td class="px-4 py-3" id="fodder_total_grass_beef">0</td>
                                                <td class="px-4 py-3" id="fodder_total_concentrate_beef">0</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                     <p class="text-xs text-gray-500 mt-2">Note: Calculations based on Dry Matter intake percentages of body weight, assuming an 80/20 roughage-to-concentrate ratio.</p>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">3. Annual Land Requirements</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <p class="text-sm text-green-800">Fodder Production</p>
                                        <p class="font-bold text-2xl text-green-900"><span id="fodder_land_production_beef">0</span> Acres</p>
                                    </div>
                                     <div class="bg-blue-50 p-4 rounded-lg">
                                        <p class="text-sm text-blue-800">Farmstead (Buildings)</p>
                                        <p class="font-bold text-2xl text-blue-900"><span id="fodder_land_farmstead_beef">0</span> Acres</p>
                                    </div>
                                    <div class="bg-purple-50 p-4 rounded-lg ring-2 ring-purple-200">
                                        <p class="text-sm text-purple-800">Total Land Required</p>
                                        <p class="font-bold text-2xl text-purple-900"><span id="fodder_land_total_beef">0</span> Acres</p>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Note: Land for fodder based on a stocking rate of 1.75 acres per cow-calf unit.</p>
                            </div>
                         </div>
                    </div>

                    <!-- Fattening Fodder Content (hidden by default) -->
                    <div id="fattening-fodder-tab" class="hidden">
                        <div class="p-4 bg-orange-50 border border-orange-200 rounded-lg mb-6">
                             <div class="flex justify-center mb-4">
                                <div class="inline-flex rounded-md shadow-sm bg-gray-200 p-1">
                                    <button data-mode="recommendation" class="mode-toggle-button fattening-mode-toggle active px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-md z-10">Recommendation</button>
                                    <button data-mode="manual" class="mode-toggle-button fattening-mode-toggle px-4 py-2 text-sm font-medium text-gray-700 rounded-md -ml-1">Manual Input</button>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="fodder-fattening-herd-size" class="block text-base font-semibold text-orange-800">Number of Cattle:</label>
                                    <input type="number" id="fodder-fattening-herd-size" value="50" class="mt-1 w-full p-2 border border-orange-300 rounded-md" oninput="updateFodderCalculatorFattening()">
                                </div>
                                <div>
                                     <label for="fodder-fattening-duration" class="block text-base font-semibold text-orange-800">Duration:</label>
                                     <select id="fodder-fattening-duration" class="mt-1 w-full p-2 border border-orange-300 rounded-md" onchange="updateFodderCalculatorFattening()">
                                        <option value="3">3 Months (90 days)</option>
                                        <option value="4">4 Months (120 days)</option>
                                     </select>
                                </div>
                            </div>
                            <div id="fattening-recommendation-inputs" class="mt-4">
                                 <div>
                                    <label for="fattening_start_weight_rec" class="block text-base font-semibold text-orange-800">Starting Weight (kg):</label>
                                    <input type="number" id="fattening_start_weight_rec" value="200" class="mt-1 w-full md:w-1/2 p-2 border border-orange-300 rounded-md" oninput="updateFodderCalculatorFattening()">
                                 </div>
                            </div>
                            <div id="fattening-manual-inputs" class="hidden mt-4 space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="fattening_start_weight_man" class="block text-base font-semibold text-orange-800">Starting Weight (kg):</label>
                                        <input type="number" id="fattening_start_weight_man" value="200" class="mt-1 w-full p-2 border border-orange-300 rounded-md" oninput="updateFodderCalculatorFattening()">
                                    </div>
                                    <div>
                                        <label for="fattening_adg_man" class="block text-base font-semibold text-orange-800">Target ADG (kg/day):</label>
                                        <input type="number" step="0.1" id="fattening_adg_man" value="1.2" class="mt-1 w-full p-2 border border-orange-300 rounded-md" oninput="updateFodderCalculatorFattening()">
                                    </div>
                                </div>
                            </div>
                        </div>

                         <div class="space-y-6">
                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">1. Key Performance Metrics (Estimates)</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Final Weight/Animal:</strong> <span id="fattening_final_weight" class="block font-bold text-xl">0 kg</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Total Gain/Animal:</strong> <span id="fattening_total_gain" class="block font-bold text-xl">0 kg</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Feed Conv. Ratio:</strong> <span id="fattening_fcr" class="block font-bold text-xl">0:1</span></div>
                                    <div class="bg-gray-100 p-3 rounded-md text-center"><strong>Housing Space:</strong> <span id="fattening_space" class="block font-bold text-xl">0 mÂ²</span></div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-gray-800 mb-3">2. Total Feed Requirements for the Period</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                    <div class="bg-red-50 p-4 rounded-lg">
                                        <p class="text-sm text-red-800">Total Roughage</p>
                                        <p class="font-bold text-2xl text-red-900"><span id="fattening_total_roughage">0</span> kg</p>
                                    </div>
                                     <div class="bg-blue-50 p-4 rounded-lg">
                                        <p class="text-sm text-blue-800">Total Concentrate</p>
                                        <p class="font-bold text-2xl text-blue-900"><span id="fattening_total_concentrate">0</span> kg</p>
                                    </div>
                                    <div class="bg-gray-100 p-4 rounded-lg">
                                        <p class="text-sm text-gray-800">Total Feed</p>
                                        <p class="font-bold text-2xl text-gray-900"><span id="fattening_total_feed">0</span> kg</p>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Note: Assumes a high-energy diet (e.g., 70% concentrate, 30% roughage) for rapid growth.</p>
                            </div>

                         </div>

                    </div>


                </div>

                <!--Footer-->
                <div class="flex justify-end pt-2 border-t mt-4">
                    <button id="fodder-modal-close-btn" class="px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>
    
     <!-- Feeding Tech Modal -->
    <div id="feeding-tech-modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div id="feeding-tech-modal-overlay" class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-4xl mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3 border-b">
                    <p class="text-2xl font-bold text-gray-800">Modern Feeding Technologies</p>
                    <div id="feeding-tech-modal-close" class="cursor-pointer z-50">
                        <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 18 18">
                            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
                        </svg>
                    </div>
                </div>
                <!--Body-->
                <div class="my-5 max-h-[70vh] overflow-y-auto pr-4 space-y-2">
                    <!-- Accordion Item 1 -->
                    <div class="border-b">
                        <button class="accordion-button flex justify-between items-center w-full py-4 text-left font-semibold text-lg text-gray-800">
                            <span>Urea-Molasses Straw (UMS) & Blocks (UMB)</span>
                            <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 pt-0 space-y-4 text-sm">
                                <div>
                                    <h4 class="font-bold text-gray-700">What It Is:</h4>
                                    <p>A technique to improve the nutritional value and palatability of low-quality crop residues like rice straw, which are abundant in regions like Bangladesh. It provides supplemental non-protein nitrogen (urea) and readily available energy (molasses) to rumen microbes.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-700">Method & Formulation:</h4>
                                    <ul class="list-disc list-inside space-y-1">
                                        <li><strong>UMS (Liquid Mix):</strong> A standard ratio is <strong>100kg of chopped straw : 15-20kg of molasses : 1kg of urea</strong>, dissolved in enough water to make the straw damp but not dripping. The mixture should be prepared daily.</li>
                                        <li><strong>UMB (Solid Block):</strong> A typical formula is <strong>45% Molasses, 10% Urea, 10% Rice Bran, 10% Salt, 15% Mineral Mix, and 10% Binder (like cement or clay)</strong>. Ingredients are thoroughly mixed, pressed into a mold, and sun-dried until hard.</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-700">Feeding Recommendations:</h4>
                                    <p>UMS can be offered ad-libitum as a replacement for untreated straw. UMB blocks are provided for free-choice licking, with intake naturally limited to around 500-700g per day for adult cattle.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-green-600">Advantages:</h4>
                                    <p>Increases digestibility and intake of straw, boosts microbial protein synthesis in the rumen, improves animal body condition, and is a cost-effective supplement.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-red-600">Constraints:</h4>
                                    <p>Risk of urea toxicity if not mixed properly or if animals consume too much too quickly. UMB production can be labor-intensive.</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-indigo-600">Scientific Perspective:</h4>
                                    <p>Research published in journals like *Tropical Animal Health and Production* consistently shows that UMS/UMB supplementation can mitigate weight loss during dry seasons and improve the overall productivity of animals on poor-quality forage diets.</p>
                                </div>
                                 <div class="p-4 bg-gray-100 rounded-lg mt-4">
                                     <h4 class="font-bold text-gray-700">Daily UMS Requirement Calculator</h4>
                                      <div class="grid grid-cols-2 gap-4 mt-2">
                                        <div>
                                            <label class="text-sm">Number of Adult Cattle:</label>
                                            <input type="number" id="ums-herd-size" value="10" class="w-full p-1 border rounded" oninput="calculateUmsRequirements()">
                                        </div>
                                         <div>
                                            <label class="text-sm">Daily Straw/Cow (kg):</label>
                                            <input type="number" id="ums-straw-per-cow" value="5" class="w-full p-1 border rounded" oninput="calculateUmsRequirements()">
                                        </div>
                                      </div>
                                      <div class="mt-4 grid grid-cols-3 gap-2 text-center text-sm">
                                          <div class="bg-white p-2 rounded"><p class="font-bold">Total Straw</p><span id="ums-total-straw">0</span> kg</div>
                                          <div class="bg-white p-2 rounded"><p class="font-bold">Total Molasses</p><span id="ums-total-molasses">0</span> kg</div>
                                          <div class="bg-white p-2 rounded"><p class="font-bold">Total Urea</p><span id="ums-total-urea">0</span> kg</div>
                                      </div>
                                 </div>
                            </div>
                        </div>
                    </div>
                    <!-- Accordion Item 2 -->
                    <div class="border-b">
                         <button class="accordion-button flex justify-between items-center w-full py-4 text-left font-semibold text-lg text-gray-800">
                            <span>Urea-Treated Straw (Ammoniation)</span>
                             <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                             <div class="p-4 pt-0 space-y-4 text-sm">
                                 <p>Details about Urea-Treated Straw...</p>
                            </div>
                        </div>
                    </div>
                     <!-- Accordion Item 3 -->
                    <div class="border-b">
                         <button class="accordion-button flex justify-between items-center w-full py-4 text-left font-semibold text-lg text-gray-800">
                            <span>Bypass Protein Technology</span>
                             <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                             <div class="p-4 pt-0 space-y-4 text-sm">
                                <p>Details about Bypass Protein...</p>
                            </div>
                        </div>
                    </div>
                     <!-- Accordion Item 4 -->
                    <div class="border-b">
                         <button class="accordion-button flex justify-between items-center w-full py-4 text-left font-semibold text-lg text-gray-800">
                            <span>Precision & AI-Driven Feeding</span>
                             <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 pt-0 space-y-4 text-sm">
                                <p>Details about Precision Feeding...</p>
                            </div>
                        </div>
                    </div>

                </div>
                <!--Footer-->
                <div class="flex justify-end pt-2 border-t mt-4">
                    <button id="feeding-tech-modal-close-btn" class="px-4 bg-indigo-500 p-3 rounded-lg text-white hover:bg-indigo-400 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- Modal Toggling Logic ---
        function setupModal(openBtnId, modalId, overlayId, closeBtnId, closeBtnId2) {
            const openBtn = document.getElementById(openBtnId);
            const modal = document.getElementById(modalId);
            const overlay = document.getElementById(overlayId);
            const closeBtn = document.getElementById(closeBtnId);
            const closeBtn2 = document.getElementById(closeBtnId2);

            const toggle = () => {
                modal.classList.toggle('opacity-0');
                modal.classList.toggle('pointer-events-none');
                document.body.classList.toggle('modal-active');
            };

            openBtn.addEventListener('click', toggle);
            overlay.addEventListener('click', toggle);
            closeBtn.addEventListener('click', toggle);
            closeBtn2.addEventListener('click', toggle);
            
            return toggle;
        }

        const toggleHousingModal = setupModal('housing-modal-open', 'housing-modal', 'housing-modal-overlay', 'housing-modal-close', 'housing-modal-close-btn');
        const toggleSelectionModal = setupModal('selection-modal-open', 'selection-modal', 'selection-modal-overlay', 'selection-modal-close', 'selection-modal-close-btn');
        const toggleVaccinationModal = setupModal('vaccination-modal-open', 'vaccination-modal', 'vaccination-modal-overlay', 'vaccination-modal-close', 'vaccination-modal-close-btn');
        const toggleFodderModal = setupModal('fodder-modal-open', 'fodder-modal', 'fodder-modal-overlay', 'fodder-modal-close', 'fodder-modal-close-btn');
        const toggleFeedingTechModal = setupModal('feeding-tech-modal-open', 'feeding-tech-modal', 'feeding-tech-modal-overlay', 'feeding-tech-modal-close', 'feeding-tech-modal-close-btn');

        
        // --- Tabbed Modals Setup ---
        function setupTabbedModal(modal) {
            const tabs = modal.querySelectorAll('.modal-tab-button');
            const tabContents = modal.querySelectorAll('[id$="-tab"]');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    const targetContentId = tab.getAttribute('data-tab');
                    tabContents.forEach(content => {
                        content.id === targetContentId ? content.classList.remove('hidden') : content.classList.add('hidden');
                    });
                });
            });
        }
        
        setupTabbedModal(document.getElementById('selection-modal'));
        setupTabbedModal(document.getElementById('vaccination-modal'));
        setupTabbedModal(document.getElementById('fodder-modal'));

        // --- Dynamic Farm Layout Logic ---
        function updateFarmLayout() {
            const totalCows = parseInt(document.getElementById('cow-herd-size').value) || 0;
            const baseHerd = 40;
            const scale = totalCows / baseHerd;

            // A. Herd Composition
            const milkingCows = Math.round(totalCows * (24 / baseHerd));
            const dryCows = totalCows - milkingCows;
            const heifers = Math.round(totalCows * (11 / baseHerd));
            const calves = Math.round(totalCows * (22 / baseHerd));
            const bullocks = Math.max(2, Math.ceil(totalCows * (6 / baseHerd)));

            document.getElementById('layout_milking_cows').textContent = milkingCows;
            document.getElementById('layout_dry_cows').textContent = dryCows;
            document.getElementById('layout_heifers').textContent = heifers;
            document.getElementById('layout_calves').textContent = calves;
            document.getElementById('layout_bullocks').textContent = bullocks;


            // B. Animal Housing
            document.getElementById('layout_stanchion_barn').textContent = Math.round((milkingCows / 26) * (49 * 34));
            document.getElementById('layout_baby_calf_barn').textContent = Math.ceil(calves / 5);
            document.getElementById('layout_baby_calf_area').textContent = Math.round(Math.ceil(calves/5) * 110);
            document.getElementById('layout_loafing_unroofed').textContent = Math.round((dryCows + heifers) * 50);
            document.getElementById('layout_loafing_paved').textContent = Math.round((dryCows + heifers) * 80);
            document.getElementById('layout_older_calf_barn').textContent = Math.round(heifers * 35);
            document.getElementById('layout_cow_prep_room').textContent = Math.round((milkingCows / 26) * 1400);
            document.getElementById('layout_bullock_shed').textContent = Math.round((bullocks / 6) * 240);
            const maternityCapacity = Math.max(2, Math.ceil(totalCows / 10));
            document.getElementById('layout_maternity_capacity').textContent = maternityCapacity;
            document.getElementById('layout_maternity_barn').textContent = maternityCapacity * 100;

            // C. Support & Storage
            document.getElementById('layout_feed_store').textContent = Math.round(scale * 600);
            document.getElementById('layout_hay_store').textContent = Math.round(scale * 500); 

            // D. Land, Pits & Open Areas
            document.getElementById('layout_fodder_plot').textContent = (scale * 16).toFixed(2);
            document.getElementById('layout_manure_pit').textContent = Math.round(scale * 200);
            document.getElementById('layout_silo_pit').textContent = Math.round(scale * 200);
            document.getElementById('layout_threshing_floor').textContent = Math.round(scale * 900);
            document.getElementById('layout_pond').textContent = Math.round(scale * 1800);
        }

        // --- Dynamic Feeds & Fodder Logic (DAIRY) ---
        function updateFodderCalculator() {
            const dairyMode = document.querySelector('.dairy-mode-toggle.active').dataset.mode;

            let lactatingCows, dryCows, bullocks, heifers, calves;
            let reqs;
            let totalAnimalsForLand;


            if (dairyMode === 'manual') {
                lactatingCows = parseInt(document.getElementById('manual_dairy_lactating').value) || 0;
                dryCows = parseInt(document.getElementById('manual_dairy_dry').value) || 0;
                bullocks = parseInt(document.getElementById('manual_dairy_bullocks').value) || 0;
                heifers = parseInt(document.getElementById('manual_dairy_heifers').value) || 0;
                calves = parseInt(document.getElementById('manual_dairy_calves').value) || 0;
                
                const bw = {
                    l: parseInt(document.getElementById('manual_dairy_bw_l').value) || 0,
                    d: parseInt(document.getElementById('manual_dairy_bw_d').value) || 0,
                    b: parseInt(document.getElementById('manual_dairy_bw_b').value) || 0,
                    h: parseInt(document.getElementById('manual_dairy_bw_h').value) || 0,
                    c: parseInt(document.getElementById('manual_dairy_bw_c').value) || 0,
                };

                const dailyMilkProduction = parseFloat(document.getElementById('manual_dairy_milk_production').value) || 10;
                let lactatingConcentrate = 0;
                if (dailyMilkProduction > 3) {
                    lactatingConcentrate = 3 + (dailyMilkProduction - 3) / 2.5;
                } else if (dailyMilkProduction > 0) {
                    lactatingConcentrate = 3;
                }


                reqs = {
                    lactating: { grass: (bw.l / 100) * 6, conc: lactatingConcentrate },
                    dry: { grass: (bw.d / 100) * 6, conc: (bw.d / 100) * 1 },
                    bullock: { grass: (bw.b / 100) * 6, conc: (bw.b / 100) * 0.5 },
                    heifer: { grass: (bw.h / 100) * 6, conc: (bw.h / 100) * 1.5 },
                    calf: { grass: (bw.c / 100) * 6, conc: (bw.c / 30) * 0.82 }
                };

                document.getElementById('manual_dairy_feed_lg').value = reqs.lactating.grass.toFixed(2);
                document.getElementById('manual_dairy_feed_lc').value = reqs.lactating.conc.toFixed(2);
                document.getElementById('manual_dairy_feed_dg').value = reqs.dry.grass.toFixed(2);
                document.getElementById('manual_dairy_feed_dc').value = reqs.dry.conc.toFixed(2);
                document.getElementById('manual_dairy_feed_bg').value = reqs.bullock.grass.toFixed(2);
                document.getElementById('manual_dairy_feed_bc').value = reqs.bullock.conc.toFixed(2);
                document.getElementById('manual_dairy_feed_hg').value = reqs.heifer.grass.toFixed(2);
                document.getElementById('manual_dairy_feed_hc').value = reqs.heifer.conc.toFixed(2);
                document.getElementById('manual_dairy_feed_cg').value = reqs.calf.grass.toFixed(2);
                document.getElementById('manual_dairy_feed_cc').value = reqs.calf.conc.toFixed(2);
            } else { // Recommendation Mode
                const totalCows = parseInt(document.getElementById('fodder-herd-size').value) || 0;
                const dailyMilkProduction = parseFloat(document.getElementById('dairy_milk_production_rec').value) || 10;
                const baseHerd = 517;

                lactatingCows = Math.round(totalCows * (362 / baseHerd));
                dryCows = totalCows - lactatingCows;
                bullocks = Math.round(totalCows * (83 / baseHerd));
                heifers = Math.round(totalCows * (181 / baseHerd));
                calves = Math.round(totalCows * (362 / baseHerd)); 
                
                let lactatingConcentrate = 0;
                 if (dailyMilkProduction > 3) {
                    lactatingConcentrate = 3 + (dailyMilkProduction - 3) / 2.5;
                } else if (dailyMilkProduction > 0) {
                    lactatingConcentrate = 3;
                }

                reqs = {
                    lactating: { grass: 24, conc: lactatingConcentrate },
                    dry: { grass: 18, conc: 3 },
                    bullock: { grass: 30, conc: 2.5 },
                    heifer: { grass: 7.2, conc: 1.8 },
                    calf: { grass: 1.8, conc: 0.82 }
                };
            }

            // Common calculation logic...
            document.getElementById('fodder_lactating_cows').textContent = lactatingCows.toLocaleString('en-IN');
            document.getElementById('fodder_dry_cows').textContent = dryCows.toLocaleString('en-IN');
            document.getElementById('fodder_bullocks').textContent = bullocks.toLocaleString('en-IN');
            document.getElementById('fodder_heifers').textContent = heifers.toLocaleString('en-IN');
            document.getElementById('fodder_calves').textContent = calves.toLocaleString('en-IN');

            const annual = {
                lactating: { grass: lactatingCows * reqs.lactating.grass * 365, conc: lactatingCows * reqs.lactating.conc * 365 },
                dry: { grass: dryCows * reqs.dry.grass * 365, conc: dryCows * reqs.dry.conc * 365 },
                bullock: { grass: bullocks * reqs.bullock.grass * 365, conc: bullocks * reqs.bullock.conc * 365 },
                heifer: { grass: heifers * reqs.heifer.grass * 365, conc: heifers * reqs.heifer.conc * 365 },
                calf: { grass: calves * reqs.calf.grass * 365, conc: calves * reqs.calf.conc * 365 }
            };

            const totalGrass = annual.lactating.grass + annual.dry.grass + annual.bullock.grass + annual.heifer.grass + annual.calf.grass;
            const totalConcentrate = annual.lactating.conc + annual.dry.conc + annual.bullock.conc + annual.heifer.conc + annual.calf.conc;
            totalAnimalsForLand = lactatingCows + dryCows + bullocks + heifers + calves;
            const baseHerdForLand = 517+83+181+362;
            
            const tableBody = document.getElementById('fodder_req_table');
            tableBody.innerHTML = `
                <tr><td class="px-4 py-3">Lactating Cows</td><td class="px-4 py-3">${Math.round(annual.lactating.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annual.lactating.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Dry Cows</td><td class="px-4 py-3">${Math.round(annual.dry.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annual.dry.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Bullocks</td><td class="px-4 py-3">${Math.round(annual.bullock.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annual.bullock.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Heifers</td><td class="px-4 py-3">${Math.round(annual.heifer.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annual.heifer.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Calves</td><td class="px-4 py-3">${Math.round(annual.calf.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annual.calf.conc).toLocaleString('en-IN')}</td></tr>
            `;
            document.getElementById('fodder_total_grass').textContent = Math.round(totalGrass).toLocaleString('en-IN');
            document.getElementById('fodder_total_concentrate').textContent = Math.round(totalConcentrate).toLocaleString('en-IN');

            const fodderLand = totalAnimalsForLand * (206.8 / baseHerdForLand);
            const farmsteadLand = totalAnimalsForLand * (25.85 / baseHerdForLand);
            document.getElementById('fodder_land_production').textContent = fodderLand.toFixed(2);
            document.getElementById('fodder_land_farmstead').textContent = farmsteadLand.toFixed(2);
            document.getElementById('fodder_land_total').textContent = (fodderLand + farmsteadLand).toFixed(2);
            
            const perennialLand = fodderLand * 0.6;
            const seasonalLand = fodderLand * 0.4;
            const yieldPerAcre = 402452;
            const totalProduction = fodderLand * yieldPerAcre;
            const surplus = totalProduction - totalGrass;

            document.getElementById('fodder_perennial_land').textContent = perennialLand.toFixed(2);
            document.getElementById('fodder_seasonal_land').textContent = seasonalLand.toFixed(2);
            document.getElementById('fodder_total_production').textContent = Math.round(totalProduction).toLocaleString('en-IN');
            document.getElementById('fodder_total_requirement_2').textContent = Math.round(totalGrass).toLocaleString('en-IN');
            document.getElementById('fodder_surplus').textContent = Math.round(surplus).toLocaleString('en-IN');
        }

        // --- Dynamic Feeds & Fodder Logic (BEEF) ---
        function updateFodderCalculatorBeef() {
            const breedingCows = parseInt(document.getElementById('fodder-beef-herd-size').value) || 0;

            // Herd Composition
            const bulls = Math.ceil(breedingCows / 25);
            const replacementHeifers = Math.round(breedingCows * 0.15); // 15% replacement rate
            const calvesToWean = breedingCows * 0.85; // 85% weaning rate
            const steers = Math.round(calvesToWean / 2);

            document.getElementById('fodder_beef_cows').textContent = breedingCows.toLocaleString('en-IN');
            document.getElementById('fodder_beef_bulls').textContent = bulls.toLocaleString('en-IN');
            document.getElementById('fodder_beef_steers').textContent = (steers + (calvesToWean/2 - replacementHeifers)).toLocaleString('en-IN'); // Steers + non-replacement heifers
            document.getElementById('fodder_beef_heifers').textContent = replacementHeifers.toLocaleString('en-IN');

            // Assumptions for calculation (BW in kg, DM intake as % of BW)
            const params = {
                cow: { bw: 450, dm: 0.025 },
                bull: { bw: 800, dm: 0.02 },
                grower: { bw: 300, dm: 0.027 }, // Average for steers/heifers
                heifer: { bw: 350, dm: 0.026 }
            };
            const ROUGHAGE_RATIO = 0.8; 
            const CONCENTRATE_RATIO = 0.2;

            // Annual DM and Feed calculations
            const annualDM = {
                cow: breedingCows * params.cow.bw * params.cow.dm * 365,
                bull: bulls * params.bull.bw * params.bull.dm * 365,
                grower: (steers + (calvesToWean/2 - replacementHeifers)) * params.grower.bw * params.grower.dm * 365,
                heifer: replacementHeifers * params.heifer.bw * params.heifer.dm * 365
            };

            const annualFeed = {
                cow: { grass: annualDM.cow * ROUGHAGE_RATIO, conc: annualDM.cow * CONCENTRATE_RATIO },
                bull: { grass: annualDM.bull * ROUGHAGE_RATIO, conc: annualDM.bull * CONCENTRATE_RATIO },
                grower: { grass: annualDM.grower * ROUGHAGE_RATIO, conc: annualDM.grower * CONCENTRATE_RATIO },
                heifer: { grass: annualDM.heifer * ROUGHAGE_RATIO, conc: annualDM.heifer * CONCENTRATE_RATIO }
            };

            const totalGrass = annualFeed.cow.grass + annualFeed.bull.grass + annualFeed.grower.grass + annualFeed.heifer.grass;
            const totalConcentrate = annualFeed.cow.conc + annualFeed.bull.conc + annualFeed.grower.conc + annualFeed.heifer.conc;

            // Update Beef Requirements Table
            const tableBodyBeef = document.getElementById('fodder_req_table_beef');
            tableBodyBeef.innerHTML = `
                <tr><td class="px-4 py-3">Breeding Cows</td><td class="px-4 py-3">${Math.round(annualFeed.cow.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annualFeed.cow.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Bulls</td><td class="px-4 py-3">${Math.round(annualFeed.bull.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annualFeed.bull.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Growing Stock</td><td class="px-4 py-3">${Math.round(annualFeed.grower.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annualFeed.grower.conc).toLocaleString('en-IN')}</td></tr>
                <tr><td class="px-4 py-3">Replacement Heifers</td><td class="px-4 py-3">${Math.round(annualFeed.heifer.grass).toLocaleString('en-IN')}</td><td class="px-4 py-3">${Math.round(annualFeed.heifer.conc).toLocaleString('en-IN')}</td></tr>
            `;
            document.getElementById('fodder_total_grass_beef').textContent = Math.round(totalGrass).toLocaleString('en-IN');
            document.getElementById('fodder_total_concentrate_beef').textContent = Math.round(totalConcentrate).toLocaleString('en-IN');
            
            // Beef Land Requirements
            const cowCalfUnits = breedingCows + bulls; 
            const fodderLandBeef = cowCalfUnits * 1.75; // Acres per cow-calf unit
            const farmsteadLandBeef = cowCalfUnits * 0.1; // Smaller farmstead assumption

            document.getElementById('fodder_land_production_beef').textContent = fodderLandBeef.toFixed(2);
            document.getElementById('fodder_land_farmstead_beef').textContent = farmsteadLandBeef.toFixed(2);
            document.getElementById('fodder_land_total_beef').textContent = (fodderLandBeef + farmsteadLandBeef).toFixed(2);
        }

        // --- Dynamic Feeds & Fodder Logic (FATTENING) ---
        function updateFodderCalculatorFattening() {
             const mode = document.querySelector('.fattening-mode-toggle.active').dataset.mode;

            const cattleCount = parseInt(document.getElementById('fodder-fattening-herd-size').value) || 0;
            const duration = parseInt(document.getElementById('fodder-fattening-duration').value) || 3;
            const days = duration * 30;

            let ADG, START_WEIGHT;

            if (mode === 'manual') {
                ADG = parseFloat(document.getElementById('fattening_adg_man').value) || 1.2;
                START_WEIGHT = parseInt(document.getElementById('fattening_start_weight_man').value) || 200;
            } else {
                ADG = 1.2; // Recommended value
                START_WEIGHT = parseInt(document.getElementById('fattening_start_weight_rec').value) || 200;
            }

            // Scientific parameters
            const FCR = 6.0; // 6:1
            const CONCENTRATE_RATIO = 0.7;
            const ROUGHAGE_RATIO = 0.3;
            const SPACE_PER_ANIMAL = 2.3; // sq. meters

            // Calculations
            const totalGainPerAnimal = ADG * days;
            const finalWeight = START_WEIGHT + totalGainPerAnimal;
            const totalFeedPerAnimal = totalGainPerAnimal * FCR;
            const totalRoughagePerAnimal = totalFeedPerAnimal * ROUGHAGE_RATIO;
            const totalConcentratePerAnimal = totalFeedPerAnimal * CONCENTRATE_RATIO;

            const totalRoughage = totalRoughagePerAnimal * cattleCount;
            const totalConcentrate = totalConcentratePerAnimal * cattleCount;
            const totalFeed = totalFeedPerAnimal * cattleCount;
            const totalSpace = cattleCount * SPACE_PER_ANIMAL;

            // Update UI
            document.getElementById('fattening_final_weight').textContent = `${Math.round(finalWeight)} kg`;
            document.getElementById('fattening_total_gain').textContent = `${Math.round(totalGainPerAnimal)} kg`;
            document.getElementById('fattening_fcr').textContent = `${FCR.toFixed(1)}:1`;
            document.getElementById('fattening_space').textContent = `${Math.round(totalSpace)} mÂ²`;

            document.getElementById('fattening_total_roughage').textContent = Math.round(totalRoughage).toLocaleString('en-IN');
            document.getElementById('fattening_total_concentrate').textContent = Math.round(totalConcentrate).toLocaleString('en-IN');
            document.getElementById('fattening_total_feed').textContent = Math.round(totalFeed).toLocaleString('en-IN');
        }


        // Initialize calculators on modal open
        document.getElementById('housing-modal-open').addEventListener('click', updateFarmLayout);
        document.getElementById('fodder-modal-open').addEventListener('click', () => {
            updateFodderCalculator();
            updateFodderCalculatorBeef();
            updateFodderCalculatorFattening();
        });


        // --- Global Escape Key Listener ---
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                if (!document.getElementById('housing-modal').classList.contains('pointer-events-none')) toggleHousingModal();
                if (!document.getElementById('selection-modal').classList.contains('pointer-events-none')) toggleSelectionModal();
                if (!document.getElementById('vaccination-modal').classList.contains('pointer-events-none')) toggleVaccinationModal();
                if (!document.getElementById('fodder-modal').classList.contains('pointer-events-none')) toggleFodderModal();
                if (!document.getElementById('feeding-tech-modal').classList.contains('pointer-events-none')) toggleFeedingTechModal();
            }
        });
        
        // --- Fodder Modal Mode Toggle Logic ---
        function setupModeToggle(buttonClass, recId, manualId, calculatorFunc) {
            const toggles = document.querySelectorAll(`.${buttonClass}`);
            const recInputs = document.getElementById(recId);
            const manualInputs = document.getElementById(manualId);

            toggles.forEach(button => {
                button.addEventListener('click', () => {
                    const mode = button.dataset.mode;
                    toggles.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    if (mode === 'manual') {
                        recInputs.classList.add('hidden');
                        manualInputs.classList.remove('hidden');
                    } else {
                        recInputs.classList.remove('hidden');
                        manualInputs.classList.add('hidden');
                    }
                    if (calculatorFunc) calculatorFunc();
                });
            });
             manualInputs.querySelectorAll('input, select').forEach(input => {
                input.addEventListener('input', calculatorFunc);
            });
        }
        
        setupModeToggle('dairy-mode-toggle', 'dairy-recommendation-inputs', 'dairy-manual-inputs', updateFodderCalculator);
        setupModeToggle('fattening-mode-toggle', 'fattening-recommendation-inputs', 'fattening-manual-inputs', updateFodderCalculatorFattening);

        // Accordion Logic for Feeding Tech
        document.querySelectorAll('.accordion-button').forEach(button => {
            button.addEventListener('click', () => {
                const accordionContent = button.nextElementSibling;
                const icon = button.querySelector('svg');

                button.classList.toggle('active');

                if (button.classList.contains('active')) {
                    accordionContent.style.maxHeight = accordionContent.scrollHeight + 'px';
                    icon.style.transform = 'rotate(180deg)';
                } else {
                    accordionContent.style.maxHeight = 0;
                    icon.style.transform = 'rotate(0deg)';
                }
            });
        });
        
        // UMS Calculator
        function calculateUmsRequirements() {
            const herdSize = parseInt(document.getElementById('ums-herd-size').value) || 0;
            const strawPerCow = parseFloat(document.getElementById('ums-straw-per-cow').value) || 0;
            
            const totalStraw = herdSize * strawPerCow;
            const totalMolasses = totalStraw * (15/100); // Using 15kg molasses per 100kg straw
            const totalUrea = totalStraw * (1/100); // Using 1kg urea per 100kg straw

            document.getElementById('ums-total-straw').textContent = totalStraw.toFixed(1);
            document.getElementById('ums-total-molasses').textContent = totalMolasses.toFixed(1);
            document.getElementById('ums-total-urea').textContent = totalUrea.toFixed(1);
        }
        function calculateUtsRequirements() {
            const strawAmount = parseFloat(document.getElementById('uts-straw-amount').value) || 0;
            
            const totalUrea = strawAmount * (4/100); // 4kg Urea per 100kg Straw
            const totalWater = strawAmount * (50/100); // 50L water per 100kg Straw

            document.getElementById('uts-total-urea').textContent = totalUrea.toFixed(1);
            document.getElementById('uts-total-water').textContent = totalWater.toFixed(1);
        }

        document.getElementById('feeding-tech-modal-open').addEventListener('click', ()=>{
            calculateUmsRequirements();
            calculateUtsRequirements();
        });


    </script>
</body>
</html>

